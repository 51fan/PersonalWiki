## 75	[Back](./antirez.md)

### Redis new data structure: the HyperLogLog
#### Antirez

<br />
<br />

- Generally speaking, I love randomized algorithms, but there is one I love particularly since even after you understand how it works, it still remains magical from a programmer point of view. It accomplishes something that is almost illogical given how little it asks for in terms of time or space. This algorithm is called **HyperLogLog**, and today it is introduced as a new data structure for Redis.

<br />

##### Counting unique things

- Usually counting unique things, for example the number of unique IPs that connected today to your web site, or the number of unique searches that your users performed, requires to remember all the unique elements encountered so far, in order to match the next element with the set of already seen elements, and increment a counter only if the new element was never seen before.
- This requires an amount of memory proportional(等比例的) to the cardinality(基數)(number of items) in the set we are counting, which is, often absolutely prohibitive(过高的).
- There is a class of algorithms that use randomization in order to provide an approximation(近似值) of the number of unique elements in a set using just a constant, and small, amount of memory. The best of such algorithms currently known is called **HyperLogLog**, and is due to *Philippe Flajolet*.
- HyperLogLog is remarkable(非凡的) as it provides a very good approximation of the cardinality of a set even using a very small amount of memory. In the Redis implementation it only uses **12kbytes** per key to count with a standard error of **0.81%**, and there is no limit to the number of items you can count, unless you approach **2^64** items (which seems quite unlikely).
- The algorithm is documented in the original paper [[1]](http://algo.inria.fr/flajolet/Publications/FlFuGaMe07.pdf), and its practical implementation and variants were covered in depth by a 2013 paper from Google [[2]](http://static.googleusercontent.com/media/research.google.com/en//pubs/archive/40671.pdf).

<br />

##### How it works?

There are plenty of wonderful resources to learn more about HyperLogLog, such as [[3]](http://blog.aggregateknowledge.com/2012/10/25/sketch-of-the-day-hyperloglog-cornerstone-of-a-big-data-infrastructure/).


<a href="#" style="left:200px;"><img src="./../pic/gotop.png"></a>
=====
<a href="http://aleen42.github.io/" target="_blank" ><img src="./../pic/tail.gif"></a>
